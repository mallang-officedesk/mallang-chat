<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<title>MALLANG Beauty Chat</title>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
html { height: 100%; overflow: hidden; touch-action: pan-y; }
body { 
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  background: #FAF9F6;
  overflow: hidden;
  width: 100%;
  height: 100%;
  height: 100dvh;
}
.screen { display: none; height: 100%; width: 100%; overflow-x: hidden; }
@supports (height: 100dvh) {
  .screen { height: 100dvh; }
}
.screen.active { display: flex; }
.lang-screen {
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 2rem;
}
.logo { font-size: 2.5rem; font-weight: 300; letter-spacing: 0.3em; margin-bottom: 1rem; }
.subtitle { color: #666; margin-bottom: 3rem; }
.lang-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem; max-width: 400px; width: 100%; }
.lang-btn {
  padding: 1.5rem;
  border: 2px solid #E5E5E5;
  background: white;
  border-radius: 12px;
  cursor: pointer;
  font-size: 1rem;
  transition: all 0.3s;
}
.lang-btn:hover { border-color: #C9A063; transform: translateY(-2px); }

.auth-screen {
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 2rem;
}
.auth-form {
  background: white;
  padding: 2rem;
  border-radius: 16px;
  width: 100%;
  max-width: 400px;
  box-shadow: 0 4px 24px rgba(0,0,0,0.08);
}
.auth-form h2 { font-size: 1.5rem; margin-bottom: 1.5rem; text-align: center; }
.form-group { margin-bottom: 1.2rem; }
.form-group label { display: block; font-size: 0.9rem; color: #666; margin-bottom: 0.5rem; }
.form-group input {
  width: 100%;
  padding: 0.8rem;
  border: 1px solid #E5E5E5;
  border-radius: 8px;
  font-size: 1rem;
}
.auth-btn {
  width: 100%;
  padding: 1rem;
  background: #C9A063;
  color: white;
  border: none;
  border-radius: 8px;
  font-size: 1rem;
  cursor: pointer;
  margin-top: 1rem;
}
.auth-btn:disabled { background: #ccc; cursor: not-allowed; }
.auth-switch {
  text-align: center;
  margin-top: 1.2rem;
  font-size: 0.9rem;
  color: #666;
}
.auth-switch a {
  color: #C9A063;
  cursor: pointer;
  text-decoration: underline;
}
.auth-error {
  background: #FFF0F0;
  color: #D00;
  padding: 0.6rem;
  border-radius: 8px;
  font-size: 0.85rem;
  text-align: center;
  margin-bottom: 1rem;
  display: none;
}
.customer-screen { flex-direction: row; }
.menu-sidebar {
  width: 180px;
  min-width: 180px;
  background: white;
  border-right: 1px solid #E5E5E5;
  display: flex;
  flex-direction: column;
  overflow-y: auto;
  transition: width 0.3s, min-width 0.3s;
}
.menu-sidebar.expanded {
  width: 320px;
  min-width: 320px;
}
.menu-tabs {
  display: flex;
  flex-direction: column;
}
.menu-tab {
  padding: 1rem 1.2rem;
  cursor: pointer;
  font-size: 0.95rem;
  border-bottom: 1px solid #F0F0F0;
  transition: all 0.2s;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}
.menu-tab:hover { background: #F9F7F3; }
.menu-tab.active { background: #F5F3EE; border-left: 3px solid #C9A063; font-weight: 600; }
.menu-content {
  flex: 1;
  overflow-y: auto;
  padding: 1.2rem;
  font-size: 0.88rem;
  line-height: 1.7;
  background: #FDFCFA;
}
.menu-content h4 {
  color: #C9A063;
  margin: 1rem 0 0.4rem;
  font-size: 0.92rem;
}
.menu-content h4:first-child { margin-top: 0; }
.menu-content .price-row {
  display: flex;
  justify-content: space-between;
  padding: 0.2rem 0;
}
.menu-content .price-row span:last-child { color: #C9A063; font-weight: 600; }
.menu-content .note { font-size: 0.8rem; color: #999; margin-top: 0.5rem; }
.menu-content .divider { border-top: 1px dashed #E5E5E5; margin: 0.8rem 0; }
.customer-chat-area {
  flex: 1;
  display: flex;
  flex-direction: column;
  min-width: 0;
}
@media (max-width: 600px) {
  .menu-sidebar {
    display: none;
    position: fixed;
    top: 0; left: 0; bottom: 0;
    width: 85vw;
    height: 100%;
    height: 100dvh;
    z-index: 1000;
    box-shadow: 4px 0 20px rgba(0,0,0,0.15);
    padding-bottom: calc(2rem + env(safe-area-inset-bottom, 0px));
  }
  .menu-sidebar.mobile-open {
    display: flex;
  }
  .menu-overlay {
    display: none;
    position: fixed;
    top: 0; left: 0;
    width: 100vw; height: 100%;
    height: 100dvh;
    background: rgba(0,0,0,0.3);
    z-index: 999;
  }
  .menu-overlay.active { display: block; }
  .mobile-menu-btn { display: inline-flex !important; }
  .input-area { padding-bottom: 2.5rem; }
}
.chat-header {
  background: white;
  padding: 1rem;
  border-bottom: 1px solid #E5E5E5;
  display: flex;
  justify-content: space-between;
  align-items: center;
}
.chat-header h3 { font-size: 1.1rem; }
.lang-badge {
  padding: 0.4rem 0.8rem;
  background: #F5F3EE;
  border-radius: 20px;
  font-size: 0.85rem;
}
.messages {
  flex: 1;
  overflow-y: auto;
  padding: 1.5rem;
}
.message {
  margin-bottom: 1rem;
  display: flex;
  flex-direction: column;
  position: relative;
}
.message.from-me { align-items: flex-end; }
.message.from-them { align-items: flex-start; }
.msg-bubble {
  max-width: 90%;
  padding: 0.8rem 1rem;
  border-radius: 12px;
  word-wrap: break-word;
  position: relative;
  letter-spacing: 0.03em;
  line-height: 1.7;
}
.message.from-me .msg-bubble { background: #C9A063; color: white; }
.message.from-them .msg-bubble { background: white; border: 1px solid #E5E5E5; }
.msg-time { font-size: 0.75rem; color: #999; margin-top: 0.3rem; }
.msg-delete {
  display: none;
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  background: #FF4444;
  color: white;
  border: none;
  border-radius: 50%;
  width: 22px;
  height: 22px;
  font-size: 12px;
  cursor: pointer;
  line-height: 1;
  z-index: 1;
}
.message.from-me .msg-delete { left: -30px; }
.message.from-them .msg-delete { right: -30px; }
.message:hover .msg-delete { display: block; }
.msg-deleted { font-style: italic; opacity: 0.5; }
.msg-highlight {
  background: #FFE0E0;
  color: #C00;
  font-weight: 700;
  padding: 2px 6px;
  border-radius: 4px;
}
.input-area {
  background: white;
  padding: 1rem;
  padding-bottom: max(1.5rem, calc(1rem + env(safe-area-inset-bottom, 20px)));
  border-top: 1px solid #E5E5E5;
  display: flex;
  gap: 0.8rem;
}
.msg-input {
  flex: 1;
  padding: 0.8rem;
  border: 1px solid #E5E5E5;
  border-radius: 20px;
  font-size: 1rem;
  resize: none;
  font-family: inherit;
  min-height: 2.5rem;
  max-height: 7.5rem;
  overflow-y: hidden;
  line-height: 1.4;
}
.send-btn {
  padding: 0.8rem 1.5rem;
  background: #C9A063;
  color: white;
  border: none;
  border-radius: 20px;
  cursor: pointer;
}
.quick-replies {
  background: white;
  border-top: 1px solid #E5E5E5;
  padding: 0.6rem 1rem;
  display: flex;
  gap: 0.5rem;
  flex-wrap: wrap;
  align-items: center;
}
.quick-reply-btn {
  padding: 0.4rem 0.8rem;
  background: #F5F3EE;
  border: 1px solid #E5E5E5;
  border-radius: 16px;
  cursor: pointer;
  font-size: 0.8rem;
  white-space: nowrap;
  transition: all 0.2s;
}
.quick-reply-btn:hover { background: #C9A063; color: white; border-color: #C9A063; }
.quick-reply-toggle {
  padding: 0.4rem 0.7rem;
  background: #666;
  color: white;
  border: none;
  border-radius: 16px;
  cursor: pointer;
  font-size: 0.8rem;
}
.staff-screen {
  display: grid;
  grid-template-columns: 320px 1fr;
}
.customer-list {
  background: white;
  border-right: 1px solid #E5E5E5;
  display: flex;
  flex-direction: column;
}
.list-header { padding: 1rem; border-bottom: 1px solid #E5E5E5; }
.list-header h2 { font-size: 1.2rem; margin-bottom: 0.8rem; }
.search-box {
  width: 100%;
  padding: 0.6rem;
  border: 1px solid #E5E5E5;
  border-radius: 8px;
}
.customer-items { flex: 1; overflow-y: auto; }
.customer-item {
  padding: 1rem;
  border-bottom: 1px solid #E5E5E5;
  cursor: pointer;
}
.customer-item:hover { background: #F9F9F9; }
.customer-item.active { background: #F5F3EE; border-left: 3px solid #C9A063; }
.customer-name {
  font-weight: 500;
  margin-bottom: 0.3rem;
  display: flex;
  gap: 0.5rem;
  align-items: center;
}
.unread { 
  background: #FF4444; 
  color: white; 
  padding: 0.2rem 0.5rem; 
  border-radius: 10px; 
  font-size: 0.7rem; 
}
.customer-preview { 
  font-size: 0.85rem; 
  color: #666; 
  white-space: nowrap; 
  overflow: hidden; 
  text-overflow: ellipsis;
  max-width: 280px;
}
.customer-time { font-size: 0.75rem; color: #999; margin-top: 0.3rem; }
.loading-screen {
  flex-direction: column;
  align-items: center;
  justify-content: center;
}
.loading-spinner {
  width: 40px;
  height: 40px;
  border: 3px solid #E5E5E5;
  border-top-color: #C9A063;
  border-radius: 50%;
  animation: spin 0.8s linear infinite;
  margin-bottom: 1rem;
}
@keyframes spin { to { transform: rotate(360deg); } }
.logout-btn {
  padding: 0.4rem 0.8rem;
  background: none;
  border: 1px solid #E5E5E5;
  border-radius: 8px;
  color: #999;
  font-size: 0.75rem;
  cursor: pointer;
}
.logout-btn:hover { background: #F5F3EE; }
.mobile-menu-btn {
  display: none;
  align-items: center;
  justify-content: center;
  padding: 0.3rem 0.6rem;
  background: #F5F3EE;
  border: 1px solid #E5E5E5;
  border-radius: 8px;
  cursor: pointer;
  font-size: 0.85rem;
  white-space: nowrap;
  gap: 0.2rem;
}
.msg-link { color: inherit; text-decoration: underline; word-break: break-all; }
.msg-link-btn {
  display: inline-block;
  padding: 8px 16px;
  background: #C9A063;
  color: white !important;
  border-radius: 20px;
  text-decoration: none;
  margin: 4px 0;
  font-size: 0.85rem;
}
.msg-link-btn:hover { background: #B8914F; }
.msg-img { max-width: 200px; border-radius: 8px; margin: 8px 0; display: block; }
@media (max-width: 768px) {
  .staff-screen { grid-template-columns: 1fr; }
  .customer-list { display: none; }
}
</style>
</head>
<body>

<!-- ë¡œë”© í™”ë©´ -->
<div class="screen active loading-screen" id="loadingScreen">
  <div class="logo">MALLANG</div>
  <div class="loading-spinner"></div>
</div>

<!-- ì–¸ì–´ ì„ íƒ -->
<div class="screen lang-screen" id="langScreen">
  <div class="logo">MALLANG</div>
  <div class="subtitle">Premium Beauty & Photo Studio</div>
  <div class="lang-grid">
    <button class="lang-btn" onclick="selectLang('ko')">ğŸ‡°ğŸ‡· í•œêµ­ì–´</button>
    <button class="lang-btn" onclick="selectLang('en')">ğŸŒ English</button>
    <button class="lang-btn" onclick="selectLang('zh')">ğŸ‡¨ğŸ‡³ ä¸­æ–‡</button>
    <button class="lang-btn" onclick="selectLang('ja')">ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª</button>
    <button class="lang-btn" onclick="selectLang('th')">ğŸ‡¹ğŸ‡­ à¸ à¸²à¸©à¸²à¹„à¸—à¸¢</button>
    <button class="lang-btn" onclick="selectLang('vi')">ğŸ‡»ğŸ‡³ Tiáº¿ng Viá»‡t</button>
  </div>

</div>

<!-- ë¡œê·¸ì¸ -->
<div class="screen auth-screen" id="loginScreen">
  <div class="logo" style="margin-bottom: 2rem;">MALLANG</div>
  <div class="auth-form">
    <h2 id="loginTitle">ë¡œê·¸ì¸</h2>
    <div class="auth-error" id="loginError"></div>
    <div class="form-group">
      <label id="loginEmailLabel">ì´ë©”ì¼ / Email</label>
      <input type="email" id="loginEmail" placeholder="email@example.com">
    </div>
    <div class="form-group">
      <label id="loginPwLabel">ë¹„ë°€ë²ˆí˜¸ / Password</label>
      <input type="password" id="loginPw" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢">
    </div>
    <button class="auth-btn" id="loginBtn" onclick="doLogin()">ë¡œê·¸ì¸ / Login</button>
    <div class="auth-switch" id="loginSwitch">
      ê³„ì •ì´ ì—†ìœ¼ì‹ ê°€ìš”? <a onclick="showScreen('signupScreen')">íšŒì›ê°€ì… / Sign Up</a>
    </div>
  </div>
</div>

<!-- íšŒì›ê°€ì… -->
<div class="screen auth-screen" id="signupScreen">
  <div class="logo" style="margin-bottom: 2rem;">MALLANG</div>
  <div class="auth-form">
    <h2 id="signupTitle">íšŒì›ê°€ì…</h2>
    <div class="auth-error" id="signupError"></div>
    <div class="form-group">
      <label id="signupNameLabel">ì´ë¦„ / Name *</label>
      <input type="text" id="signupName" placeholder="Hong Gildong">
    </div>
    <div class="form-group">
      <label id="signupEmailLabel">ì´ë©”ì¼ / Email *</label>
      <input type="email" id="signupEmail" placeholder="email@example.com">
    </div>
    <div class="form-group">
      <label id="signupPwLabel">ë¹„ë°€ë²ˆí˜¸ / Password *</label>
      <input type="password" id="signupPw" placeholder="6ì ì´ìƒ / 6+ characters">
    </div>
    <button class="auth-btn" id="signupBtn" onclick="doSignup()">íšŒì›ê°€ì… / Sign Up</button>
    <div class="auth-switch" id="signupSwitch">
      ì´ë¯¸ ê³„ì •ì´ ìˆìœ¼ì‹ ê°€ìš”? <a onclick="showScreen('loginScreen')">ë¡œê·¸ì¸ / Login</a>
    </div>
  </div>
</div>

<!-- ê³ ê° ì±„íŒ… -->
<div class="screen customer-screen" id="customerScreen">
  <div class="menu-sidebar" onclick="expandSidebar()">
    <div class="menu-tabs">
      <div class="menu-tab active" onclick="showMenu('makeup')">ğŸ’„ ë©”ì´í¬ì—…</div>
      <div class="menu-tab" onclick="showMenu('hair')">ğŸ’‡ í—¤ì–´</div>
      <div class="menu-tab" onclick="showMenu('spa')">ğŸ§– ìŠ¤íŒŒ</div>
      <div class="menu-tab" onclick="showMenu('photo')">ğŸ“· í¬í† </div>
      <div class="menu-tab" onclick="showMenu('booking')">ğŸ“… ì˜ˆì•½í•˜ê¸°</div>
    </div>
    <div class="menu-content" id="menuContent"></div>
  </div>
  <div class="customer-chat-area" onclick="collapseSidebar()">
    <div class="chat-header">
      <div style="display: flex; align-items: center; gap: 0.5rem;">
        <button class="mobile-menu-btn" onclick="event.stopPropagation(); toggleMobileMenu()">â˜° Price</button>
        <div>
          <h3>MALLANG</h3>
          <p style="font-size: 0.85rem; color: #666;" id="customerSubtitle">ìƒë‹´ì›ì´ ê³§ ì‘ë‹µí•©ë‹ˆë‹¤</p>
        </div>
      </div>
      <div style="display: flex; align-items: center; gap: 0.5rem;">
        <div class="lang-badge" id="userLang"></div>
        <button class="logout-btn" onclick="doLogout()">ë¡œê·¸ì•„ì›ƒ</button>
      </div>
    </div>
    <div class="menu-overlay" id="menuOverlay" onclick="closeMobileMenu()"></div>
    <div class="messages" id="customerMsg"></div>
    <div class="input-area">
      <textarea class="msg-input" id="customerInput" rows="1" placeholder="ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”..."></textarea>
      <button class="send-btn" onclick="sendCustomerMsg()">ì „ì†¡</button>
    </div>
  </div>
</div>

<!-- ìŠ¤íƒœí”„ í™”ë©´ -->
<div class="screen staff-screen" id="staffScreen">
  <div class="customer-list">
    <div class="list-header">
      <h2>ê³ ê° ëª©ë¡</h2>
      <input type="text" class="search-box" id="searchBox" placeholder="ê²€ìƒ‰..." oninput="searchCustomers()">
    </div>
    <div class="customer-items" id="customerList"></div>
  </div>
  <div style="display: flex; flex-direction: column;">
    <div class="chat-header">
      <div>
        <h3 id="selectedName">ê³ ê°ì„ ì„ íƒí•˜ì„¸ìš”</h3>
        <p style="font-size: 0.85rem; color: #666;" id="selectedInfo"></p>
      </div>
      <div class="lang-badge" id="selectedLang"></div>
    </div>
    <div class="messages" id="staffMsg"></div>
    <div class="quick-replies" id="quickReplies">
      <button class="quick-reply-toggle" onclick="toggleQuickReplies()">âš¡ ë¹ ë¥¸ë‹µë³€</button>
      <button class="quick-reply-btn" onclick="quickReply('address')">ğŸ“ ì£¼ì†Œ</button>
      <button class="quick-reply-btn" onclick="quickReply('confirmed')">âœ… ì˜ˆì•½ì™„ë£Œ</button>
      <button class="quick-reply-btn" onclick="quickReply('wechat')">ğŸ‡¨ğŸ‡³ ìœ„ì±—</button>
      <button class="quick-reply-btn" onclick="quickReply('paypal')">ğŸ’³ í˜ì´íŒ”</button>
      <button class="quick-reply-btn" onclick="quickReply('japan')">ğŸ‡¯ğŸ‡µ ì¼ë³¸</button>
    </div>
    <div class="input-area">
      <textarea class="msg-input" id="staffInput" rows="1" placeholder="ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”..."></textarea>
      <button class="send-btn" onclick="sendStaffMsg()">ì „ì†¡</button>
    </div>
  </div>
</div>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyCeouM3_9JCWaKTGEeQFrD3ZikAgpheJQ8",
  authDomain: "mallang-chat.firebaseapp.com",
  databaseURL: "https://mallang-chat-default-rtdb.asia-southeast1.firebasedatabase.app",
  projectId: "mallang-chat",
  storageBucket: "mallang-chat.firebasestorage.app",
  messagingSenderId: "224793274849",
  appId: "1:224793274849:web:d97f17bf3c410f0ed88aa0"
};

firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();
const db = firebase.database();

let currentLang = 'ko';
let currentRoomId = null;
let selectedRoomId = null;
let isSending = false;
let currentUser = null;

const WECHAT_QR = 'data:image/jpeg;base64,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';

const quickConfirmed = `[CENTER]â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”[/CENTER]

[CENTER]âœ… ì˜ˆì•½ ì™„ë£Œ ë˜ì—ˆìŠµë‹ˆë‹¤ âœ…[/CENTER]

[CENTER]ê¼­ !! ì½ì–´ì£¼ì„¸ìš” !![/CENTER]

**1. ì˜ˆì•½ ì‹œê°„ 10ë¶„ ì´ìƒ ì§€ê° ì‹œ ìë™ ì·¨ì†Œë˜ë©° ì˜ˆì•½ê¸ˆì€ í™˜ë¶ˆë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.**
2. ì˜ˆì•½ ë³€ê²½Â·ì·¨ì†ŒëŠ” ì˜ˆì•½ì¼ 2ì¼ ì „ ì˜¤í›„ 6ì‹œ(KST)ê¹Œì§€ ê°€ëŠ¥í•˜ë©°, ì´í›„ì—ëŠ” í™˜ë¶ˆì´ ë¶ˆê°€í•©ë‹ˆë‹¤.
3. í—¤ì–´ ìŠ¤íƒ€ì¼ë§ì„ ì˜ˆì•½í•˜ì‹  ë¶„ì€ ë‹¹ì¼ ì˜¤ì „ ìˆ™ì†Œì—ì„œ ìƒ´í‘¸ í›„ ë¦°ìŠ¤ë‚˜ í—¤ì–´ì œí’ˆ ì‚¬ìš©í•˜ì§€ ë§ê³  ë°©ë¬¸í•´ì£¼ì„¸ìš”(ì»¤íŠ¸ ì˜ˆì•½ì€ ìƒ´í‘¸ í¬í•¨ / ì˜¤ì „ 11ì‹œ ì´ì „ ìƒ´í‘¸ ë¶ˆê°€)
4. ë©”ì´í¬ì—… ì˜ˆì•½ ê³ ê°ë‹˜ì€ ê¸°ì´ˆ ì¼€ì–´ë§Œ í•˜ê³  ë¯¼ë‚¯ìœ¼ë¡œ ë°©ë¬¸í•´ ì£¼ì„¸ìš”.
5. ì½˜íƒíŠ¸ë Œì¦ˆëŠ” ë©”ì´í¬ì—… ì‹œì‘ ì „ì— ë°˜ë“œì‹œ ì°©ìš©ì„ ì™„ë£Œí•´ ì£¼ì„¸ìš”.
6. í˜„ì¥ ìƒí™©ì— ë”°ë¼ ë¶ˆê°€í”¼í•œ ëŒ€ê¸° ì‹œê°„ì´ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**ëŠ¦ê²Œ ì˜¤ì‹œë©´ ë‹¤ë¥¸ ì˜ˆì•½ ì†ë‹˜ë“¤ì—ê²Œ ë§‰ëŒ€í•œ í”¼í•´ë¥¼ ì¤„ ìˆ˜ ìˆìœ¼ë‹ˆ ì œë°œ ì˜ˆì•½ ì‹œê°„ ì•ˆì— ë„ì°©í•´ ì£¼ì‹œê¸¸ ë¶€íƒë“œë¦½ë‹ˆë‹¤**

ì˜ˆì•½ í•´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤ ğŸ™`;

const T = {
  ko: { placeholder: 'ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”...', subtitle: 'ìƒë‹´ì›ì´ ê³§ ì‘ë‹µí•©ë‹ˆë‹¤' },
  en: { placeholder: 'Type your message...', subtitle: 'Our team will reply shortly' },
  zh: { placeholder: 'è¯·è¾“å…¥æ¶ˆæ¯...', subtitle: 'æˆ‘ä»¬çš„å›¢é˜Ÿä¼šå°½å¿«å›å¤' },
  ja: { placeholder: 'ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å…¥åŠ›...', subtitle: 'ã‚¹ã‚¿ãƒƒãƒ•ãŒã™ãã«å¯¾å¿œã—ã¾ã™' },
  th: { placeholder: 'à¸à¸´à¸¡à¸à¹Œà¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡...', subtitle: 'à¸—à¸µà¸¡à¸‡à¸²à¸™à¸ˆà¸°à¸•à¸­à¸šà¸à¸¥à¸±à¸šà¹ƒà¸™à¹€à¸£à¹‡à¸§à¹† à¸™à¸µà¹‰' },
  vi: { placeholder: 'Nháº­p tin nháº¯n...', subtitle: 'NhÃ¢n viÃªn sáº½ pháº£n há»“i sá»›m' }
};

// === Auth ìƒíƒœ ê°ì§€ ===
const isStaffMode = new URLSearchParams(window.location.search).has('staff');

auth.onAuthStateChanged(async (user) => {
  if (isStaffMode) {
    goStaff();
    return;
  }
  if (user) {
    // ë¡œê·¸ì¸ ìƒíƒœ â€” ê¸°ì¡´ ì±„íŒ…ë°© ì°¾ê¸°
    currentUser = user;
    const snap = await db.ref('users/' + user.uid).once('value');
    const userData = snap.val();
    
    if (userData && userData.roomId) {
      // ê¸°ì¡´ ì±„íŒ…ë°© ìˆìŒ â†’ ë°”ë¡œ ì±„íŒ…ìœ¼ë¡œ
      currentRoomId = userData.roomId;
      currentLang = userData.lang || 'en';
      document.getElementById('userLang').textContent = getFlag(currentLang) + ' ' + currentLang.toUpperCase();
      document.getElementById('customerInput').placeholder = T[currentLang]?.placeholder || T.en.placeholder;
      document.getElementById('customerSubtitle').textContent = T[currentLang]?.subtitle || T.en.subtitle;
      showScreen('customerScreen');
      listenToMessages('customerMsg', currentRoomId, false);
    } else {
      // ë¡œê·¸ì¸ëì§€ë§Œ ì±„íŒ…ë°© ì—†ìŒ â†’ ì–¸ì–´ ì„ íƒìœ¼ë¡œ
      showScreen('langScreen');
    }
  } else {
    // ë¹„ë¡œê·¸ì¸ â†’ ì–¸ì–´ ì„ íƒ
    currentUser = null;
    showScreen('langScreen');
  }
});

function showScreen(id) {
  document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
}

function selectLang(lang) {
  currentLang = lang;
  if (currentUser) {
    // ì´ë¯¸ ë¡œê·¸ì¸ë¨ â†’ ì±„íŒ…ë°© ìƒì„±
    createRoom();
  } else {
    // ë¡œê·¸ì¸ í•„ìš”
    showScreen('loginScreen');
  }
}

const STAFF_PW = 'mallang1347';

function goStaff() {
  const pw = prompt('ìŠ¤íƒœí”„ ë¹„ë°€ë²ˆí˜¸:');
  if (pw === STAFF_PW) {
    showScreen('staffScreen');
    loadCustomerList();
  } else if (pw !== null) {
    alert('ë¹„ë°€ë²ˆí˜¸ê°€ í‹€ë ¸ìŠµë‹ˆë‹¤.');
  }
}

// === íšŒì›ê°€ì… ===
async function doSignup() {
  const name = document.getElementById('signupName').value.trim();
  const email = document.getElementById('signupEmail').value.trim();
  const pw = document.getElementById('signupPw').value;
  const errEl = document.getElementById('signupError');
  const btn = document.getElementById('signupBtn');
  
  errEl.style.display = 'none';
  
  if (!name || !email || !pw) {
    errEl.textContent = 'ëª¨ë“  í•­ëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš” / Please fill in all fields';
    errEl.style.display = 'block';
    return;
  }
  if (pw.length < 6) {
    errEl.textContent = 'ë¹„ë°€ë²ˆí˜¸ 6ì ì´ìƒ / Password must be 6+ characters';
    errEl.style.display = 'block';
    return;
  }
  
  btn.disabled = true;
  btn.textContent = 'ì²˜ë¦¬ì¤‘...';
  
  try {
    const cred = await auth.createUserWithEmailAndPassword(email, pw);
    await cred.user.updateProfile({ displayName: name });
    
    // ìœ ì € ì •ë³´ ì €ì¥
    await db.ref('users/' + cred.user.uid).set({
      name: name,
      email: email,
      lang: currentLang,
      createdAt: Date.now()
    });
    
    // ì±„íŒ…ë°© ìƒì„±
    await createRoom();
  } catch (error) {
    const msg = getAuthErrorMsg(error.code);
    errEl.textContent = msg;
    errEl.style.display = 'block';
    btn.disabled = false;
    btn.textContent = 'íšŒì›ê°€ì… / Sign Up';
  }
}

// === ë¡œê·¸ì¸ ===
async function doLogin() {
  const email = document.getElementById('loginEmail').value.trim();
  const pw = document.getElementById('loginPw').value;
  const errEl = document.getElementById('loginError');
  const btn = document.getElementById('loginBtn');
  
  errEl.style.display = 'none';
  
  if (!email || !pw) {
    errEl.textContent = 'ì´ë©”ì¼ê³¼ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš” / Please enter email and password';
    errEl.style.display = 'block';
    return;
  }
  
  btn.disabled = true;
  btn.textContent = 'ì²˜ë¦¬ì¤‘...';
  
  try {
    await auth.signInWithEmailAndPassword(email, pw);
    // onAuthStateChangedê°€ ì²˜ë¦¬
  } catch (error) {
    const msg = getAuthErrorMsg(error.code);
    errEl.textContent = msg;
    errEl.style.display = 'block';
    btn.disabled = false;
    btn.textContent = 'ë¡œê·¸ì¸ / Login';
  }
}

// === ë¡œê·¸ì•„ì›ƒ ===
async function doLogout() {
  if (!confirm('ë¡œê·¸ì•„ì›ƒ í•˜ì‹œê² ìŠµë‹ˆê¹Œ? / Logout?')) return;
  
  // ë¦¬ìŠ¤ë„ˆ í•´ì œ
  if (currentRoomId) {
    db.ref('rooms/' + currentRoomId + '/messages').off();
  }
  currentRoomId = null;
  currentUser = null;
  
  await auth.signOut();
  showScreen('langScreen');
}

// === ì±„íŒ…ë°© ìƒì„± ===
async function createRoom() {
  if (!currentUser) return;
  
  const uid = currentUser.uid;
  const name = currentUser.displayName || 'Guest';
  const email = currentUser.email || '';
  const roomId = 'room_' + uid;
  
  // ê¸°ì¡´ ë°©ì´ ìˆëŠ”ì§€ í™•ì¸
  const snap = await db.ref('rooms/' + roomId).once('value');
  if (!snap.exists()) {
    await db.ref('rooms/' + roomId).set({
      userName: name,
      userEmail: email,
      userLang: currentLang,
      userId: uid,
      lastMessage: '',
      lastMessageTime: Date.now(),
      unreadCount: 0
    });
  }
  
  // ìœ ì € ë°ì´í„°ì— roomId ì €ì¥
  await db.ref('users/' + uid).update({
    roomId: roomId,
    lang: currentLang
  });
  
  currentRoomId = roomId;
  document.getElementById('userLang').textContent = getFlag(currentLang) + ' ' + currentLang.toUpperCase();
  document.getElementById('customerInput').placeholder = T[currentLang]?.placeholder || T.en.placeholder;
  document.getElementById('customerSubtitle').textContent = T[currentLang]?.subtitle || T.en.subtitle;
  showScreen('customerScreen');
  listenToMessages('customerMsg', roomId, false);
}

// === Auth ì—ëŸ¬ ë©”ì‹œì§€ ===
function getAuthErrorMsg(code) {
  const msgs = {
    'auth/email-already-in-use': 'ì´ë¯¸ ë“±ë¡ëœ ì´ë©”ì¼ì…ë‹ˆë‹¤ / Email already in use',
    'auth/invalid-email': 'ì˜¬ë°”ë¥¸ ì´ë©”ì¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš” / Invalid email',
    'auth/weak-password': 'ë¹„ë°€ë²ˆí˜¸ê°€ ë„ˆë¬´ ì•½í•©ë‹ˆë‹¤ / Password too weak',
    'auth/user-not-found': 'ë“±ë¡ë˜ì§€ ì•Šì€ ì´ë©”ì¼ì…ë‹ˆë‹¤ / Email not found',
    'auth/wrong-password': 'ë¹„ë°€ë²ˆí˜¸ê°€ í‹€ë ¸ìŠµë‹ˆë‹¤ / Wrong password',
    'auth/invalid-credential': 'ì´ë©”ì¼ ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ê°€ í‹€ë ¸ìŠµë‹ˆë‹¤ / Invalid email or password',
    'auth/too-many-requests': 'ë„ˆë¬´ ë§ì€ ì‹œë„. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš” / Too many attempts. Try again later'
  };
  return msgs[code] || 'ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤ / An error occurred (' + code + ')';
}

// === ë¹ ë¥¸ë‹µë³€ ===
function toggleQuickReplies() {
  const btns = document.querySelectorAll('#quickReplies .quick-reply-btn');
  btns.forEach(btn => {
    btn.style.display = btn.style.display === 'none' ? 'inline-block' : 'none';
  });
}

function quickReply(key) {
  if (!selectedRoomId) {
    alert('ê³ ê°ì„ ë¨¼ì € ì„ íƒí•˜ì„¸ìš”!');
    return;
  }
  const input = document.getElementById('staffInput');

  if (key === 'paypal') {
    const won = prompt('ì˜ˆì•½ê¸ˆ (ì›/KRW):');
    if (!won) return;
    const w = parseInt(won.replace(/,/g,''));
    const usd = (w / 1350).toFixed(1);
    input.value = `ğŸ’³ PayPal Payment\n\ndeposit : ${w.toLocaleString()} won / USD ${usd}\n(Please make the payment in USD.)\n\nWe use a fixed exchange rate for overseas payments.\nThe quoted USD amount includes PayPal fees.\n\nhttps://www.paypal.com/ncp/payment/LHVBDE7UWNLD4\n\nâ€¢ Total Amount â€“ Deposit = On-site Payment (Remaining Balance)\n\nâ€¢ Your reservation will be confirmed after the deposit payment is completed.\nâ€¢ If the payment is not completed within 30 minutes, the reservation will be automatically canceled.\nâ€¢ Cancellations and refunds are available until 6:00 PM (KST), two days before the reservation date.\nâ€¢ Cancellations or changes made one day before the reservation date are non-refundable.\nâ€¢ Please send a screenshot of the payment confirmation after completing the payment.`;
  } else if (key === 'wechat') {
    const won = prompt('é¢„çº¦é‡‘ (éŸ©å…ƒ/KRW):');
    if (!won) return;
    const w = parseInt(won.replace(/,/g,''));
    input.value = `[WECHAT_QR]\n\né¢„çº¦é‡‘ï¼š${w.toLocaleString()} éŸ©å…ƒ\n\nâ€¢ æ€»ä»˜æ¬¾é‡‘é¢ â€“ é¢„çº¦é‡‘ = ç°åœºæ”¯ä»˜ï¼ˆä½™æ¬¾ï¼‰\n\nâ€¢ æœ¬æ”¯ä»˜ç³»ç»Ÿæ”¯æŒä»¥éŸ©å…ƒï¼ˆKRWï¼‰è¿›è¡Œä»˜æ¬¾ã€‚\nâ€¢ æ”¯ä»˜é¢„çº¦é‡‘åï¼Œé¢„çº¦å³ç¡®è®¤å®Œæˆã€‚\nâ€¢ 30åˆ†é’Ÿå†…æœªå®Œæˆä»˜æ¬¾ï¼Œé¢„çº¦å°†è‡ªåŠ¨å–æ¶ˆã€‚\nâ€¢ å¯åœ¨é¢„çº¦æ—¥å‰2å¤©ï¼ˆéŸ©å›½æ—¶é—´ä¸‹åˆ6ç‚¹å‰ï¼‰å–æ¶ˆå¹¶é€€æ¬¾ã€‚\nâ€¢ é¢„çº¦å‰ä¸€å¤©å–æ¶ˆæˆ–æ›´æ”¹ï¼Œé¢„çº¦é‡‘ä¸äºˆé€€è¿˜ã€‚\nâ€¢ ä»˜æ¬¾å®Œæˆåï¼Œè¯·å‘é€ä»˜æ¬¾æˆåŠŸçš„æˆªå›¾ã€‚`;
  } else if (key === 'japan') {
    const won = prompt('äºˆç´„é‡‘ (ã‚¦ã‚©ãƒ³/KRW):');
    if (!won) return;
    const w = parseInt(won.replace(/,/g,''));
    const jpy = Math.ceil(w / 8.9 / 100) * 100;
    input.value = `ğŸ‡¯ğŸ‡µ äºˆç´„é‡‘ã®ã”æ¡ˆå†…\n\näºˆç´„é‡‘ : ${w.toLocaleString()} won ( ${jpy.toLocaleString()} å†† )\n\npaypayéŠ€è¡Œ(0033)\nã¯ã‚„ã¶ã•æ”¯åº—(003)\næ™®é€š7862427\nã‚­ãƒ ã‚¸ãƒ§ãƒ³ãƒ’\n\næµ·å¤–æ±ºæ¸ˆã¯å›ºå®šç‚ºæ›¿ãƒ¬ãƒ¼ãƒˆã‚’é©ç”¨ã—ã¦ãŠã‚Šã¾ã™ã€‚\nã”æ¡ˆå†…ã—ã¦ã„ã‚‹å††ï¼ˆJPYï¼‰é‡‘é¡ã«ã¯æµ·å¤–é€é‡‘æ‰‹æ•°æ–™ãŒå«ã¾ã‚Œã¦ãŠã‚Šã¾ã™ã€‚\n\n* æ”¯æ‰•ã„å¾Œã®è©³ç´°(ç”»é¢)ã‚’ãŠé¡˜ã„ã—ã¾ã™ *\n* å›½éš›é€é‡‘æ‰‹æ•°æ–™ãŒå«ã¾ã‚ŒãŸé‡‘é¡ã§ã™ *\n\nâ€¢ ç·ãŠæ”¯æ‰•ã„é‡‘é¡ âˆ’ äºˆç´„é‡‘ ï¼ å½“æ—¥ç¾åœ°æ±ºæ¸ˆï¼ˆæ®‹é¡ï¼‰\n\nâ€¢ äºˆç´„é‡‘ã®ãŠæ”¯æ‰•ã„å®Œäº†å¾Œã€äºˆç´„ãŒç¢ºå®šã¨ãªã‚Šã¾ã™ã€‚\nâ€¢ 30åˆ†ä»¥å†…ã«ãŠæ”¯æ‰•ã„ãŒç¢ºèªã§ããªã„å ´åˆã€äºˆç´„ã¯è‡ªå‹•çš„ã«ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã¨ãªã‚Šã¾ã™ã€‚\nâ€¢ ã”äºˆç´„æ—¥ã®2æ—¥å‰18:00ï¼ˆéŸ“å›½æ™‚é–“ãƒ»KSTï¼‰ã¾ã§ã‚­ãƒ£ãƒ³ã‚»ãƒ«ãŠã‚ˆã³è¿”é‡‘ãŒå¯èƒ½ã§ã™ã€‚\nâ€¢ ã”äºˆç´„æ—¥å‰æ—¥ã®ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã¾ãŸã¯å¤‰æ›´ã¯ã€äºˆç´„é‡‘ã®è¿”é‡‘ã¯ã§ãã¾ã›ã‚“ã€‚\nâ€¢ ãŠæ”¯æ‰•ã„å¾Œã€æ±ºæ¸ˆå®Œäº†ç”»é¢ï¼ˆã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆï¼‰ã‚’ãŠé€ã‚Šãã ã•ã„ã€‚`;
  } else if (key === 'address') {
    input.value = `ğŸ“ [ Address ]\n21-3, Seolleung-ro 161-gil, Gangnam-gu, Seoul, Republic of Korea\n(kor. ì„œìš¸ì‹œ ê°•ë‚¨êµ¬ ì‹ ì‚¬ë™ 662-10)\n\n[DIRECTIONS_BTN]`;
  } else if (key === 'confirmed') {
    const info = prompt('ê³ ê° ì˜ˆì•½ ì •ë³´ë¥¼ ì…ë ¥í•˜ì„¸ìš”\n(ì˜ˆ: 3/15(í† ) 14:00 / Yuki / ë©”ì´í¬ì—…A+í—¤ì–´B)');
    if (!info) return;
    input.value = info + '\n' + quickConfirmed;
  }

  input.focus();
  autoResize(input);
}

// === ìŠ¤íƒœí”„: ê³ ê° ë¦¬ìŠ¤íŠ¸ ===
function loadCustomerList() {
  db.ref('rooms').on('value', snap => {
    const rooms = snap.val();
    if (!rooms) {
      document.getElementById('customerList').innerHTML = '<div style="padding: 2rem; text-align: center; color: #999;">ì•„ì§ ê³ ê°ì´ ì—†ìŠµë‹ˆë‹¤</div>';
      return;
    }
    const html = Object.entries(rooms)
      .sort((a,b) => b[1].lastMessageTime - a[1].lastMessageTime)
      .map(([id, r]) => `
        <div class="customer-item ${selectedRoomId === id ? 'active' : ''}" onclick="selectCustomer('${id}')">
          <div class="customer-name">
            ${r.userName || 'ì´ë¦„ ì—†ìŒ'}
            ${r.unreadCount > 0 ? `<span class="unread">${r.unreadCount}</span>` : ''}
          </div>
          <div class="customer-preview">${previewText(r.lastMessage)}</div>
          <div class="customer-time">${formatTime(r.lastMessageTime)}</div>
        </div>
      `).join('');
    document.getElementById('customerList').innerHTML = html;
  });
}

function selectCustomer(roomId) {
  selectedRoomId = roomId;
  db.ref('rooms/' + roomId).once('value', snap => {
    const r = snap.val();
    if (!r) return;
    document.getElementById('selectedName').textContent = r.userName || 'ì´ë¦„ ì—†ìŒ';
    document.getElementById('selectedInfo').textContent = `${r.userEmail || ''}`;
    document.getElementById('selectedLang').textContent = getFlag(r.userLang) + ' ' + (r.userLang || 'EN').toUpperCase();
  });
  db.ref('rooms/' + roomId + '/unreadCount').set(0);
  listenToMessages('staffMsg', roomId, true);
}

// === ë©”ì‹œì§€ ë¦¬ìŠ¤ë‹ ===
function listenToMessages(containerId, roomId, isStaff) {
  const container = document.getElementById(containerId);
  container.innerHTML = '';
  
  db.ref('rooms/' + roomId + '/messages').off('child_added');
  db.ref('rooms/' + roomId + '/messages').off('child_changed');
  
  db.ref('rooms/' + roomId + '/messages').on('child_added', snap => {
    const msg = snap.val();
    if (!msg) return;
    const msgKey = snap.key;
    const div = document.createElement('div');
    div.className = 'message ' + (msg.isStaff === isStaff ? 'from-me' : 'from-them');
    div.id = 'msg-' + msgKey;
    
    const isMine = msg.isStaff === isStaff;
    
    if (msg.deleted) {
      div.style.display = 'none';
    } else {
      const deleteBtn = (isMine && isStaff) ? `<button class="msg-delete" onclick="deleteMessage('${roomId}','${msgKey}')" title="ì‚­ì œ">âœ•</button>` : '';
      div.innerHTML = `
        <div class="msg-bubble" style="position:relative;">
          ${deleteBtn}
          ${renderMessage(msg.text)}
        </div>
        <div class="msg-time">${formatTime(msg.timestamp)}</div>
      `;
    }
    container.appendChild(div);
    container.scrollTop = container.scrollHeight;
  });
  
  db.ref('rooms/' + roomId + '/messages').on('child_changed', snap => {
    const msg = snap.val();
    const msgKey = snap.key;
    const div = document.getElementById('msg-' + msgKey);
    if (!div || !msg) return;
    if (msg.deleted) {
      div.style.display = 'none';
    }
  });
}

async function deleteMessage(roomId, msgKey) {
  if (!confirm('ì´ ë©”ì‹œì§€ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) return;
  try {
    await db.ref('rooms/' + roomId + '/messages/' + msgKey).update({ deleted: true, text: '' });
  } catch (error) {
    alert('ì‚­ì œ ì‹¤íŒ¨: ' + error.message);
  }
}

// === ë©”ì‹œì§€ ì „ì†¡ ===
async function sendCustomerMsg() {
  if (isSending) return;
  const input = document.getElementById('customerInput');
  const text = input.value.trim();
  if (!text || !currentRoomId) return;
  
  isSending = true;
  input.value = '';
  input.style.height = 'auto';
  
  try {
    await db.ref('rooms/' + currentRoomId + '/messages').push({
      text: text, isStaff: false, timestamp: Date.now()
    });
    await db.ref('rooms/' + currentRoomId).update({
      lastMessage: text, lastMessageTime: Date.now(),
      unreadCount: firebase.database.ServerValue.increment(1)
    });
  } catch (error) {
    alert('ë©”ì‹œì§€ ì „ì†¡ ì‹¤íŒ¨: ' + error.message);
  } finally { isSending = false; }
}

async function sendStaffMsg() {
  if (isSending) return;
  const input = document.getElementById('staffInput');
  const text = input.value.trim();
  if (!text || !selectedRoomId) {
    alert('ê³ ê°ì„ ë¨¼ì € ì„ íƒí•˜ì„¸ìš”!');
    return;
  }
  
  isSending = true;
  input.value = '';
  input.style.height = 'auto';
  
  try {
    await db.ref('rooms/' + selectedRoomId + '/messages').push({
      text: text, isStaff: true, timestamp: Date.now()
    });
    await db.ref('rooms/' + selectedRoomId).update({
      lastMessage: text, lastMessageTime: Date.now()
    });
  } catch (error) {
    alert('ë©”ì‹œì§€ ì „ì†¡ ì‹¤íŒ¨: ' + error.message);
  } finally { isSending = false; }
}

// === ê²€ìƒ‰ ===
function searchCustomers() {
  const q = document.getElementById('searchBox').value.toLowerCase();
  document.querySelectorAll('.customer-item').forEach(item => {
    const text = item.textContent.toLowerCase();
    item.style.display = text.includes(q) ? 'block' : 'none';
  });
}

// === í…ìŠ¤íŠ¸ ì…ë ¥ì°½ ìë™ í¬ê¸° ì¡°ì ˆ ===
function autoResize(el) {
  el.style.height = 'auto';
  const maxH = 120;
  if (el.scrollHeight > maxH) {
    el.style.height = maxH + 'px';
    el.style.overflowY = 'auto';
  } else {
    el.style.height = el.scrollHeight + 'px';
    el.style.overflowY = 'hidden';
  }
}

document.getElementById('customerInput').addEventListener('input', function() { autoResize(this); });
document.getElementById('staffInput').addEventListener('input', function() { autoResize(this); });

// === í‚¤ë³´ë“œ ===
document.getElementById('customerInput').addEventListener('keydown', e => {
  if (e.key === 'Enter' && !e.shiftKey && !e.isComposing) {
    e.preventDefault(); sendCustomerMsg();
  }
});
document.getElementById('staffInput').addEventListener('keydown', e => {
  if (e.key === 'Enter' && !e.shiftKey && !e.isComposing) {
    e.preventDefault(); sendStaffMsg();
  }
});

// ë¡œê·¸ì¸/íšŒì›ê°€ì… Enterí‚¤
document.getElementById('loginPw').addEventListener('keydown', e => {
  if (e.key === 'Enter') doLogin();
});
document.getElementById('signupPw').addEventListener('keydown', e => {
  if (e.key === 'Enter') doSignup();
});

// === ìœ í‹¸ ===
function getFlag(lang) {
  const flags = { ko: 'ğŸ‡°ğŸ‡·', en: 'ğŸŒ', zh: 'ğŸ‡¨ğŸ‡³', ja: 'ğŸ‡¯ğŸ‡µ', th: 'ğŸ‡¹ğŸ‡­', vi: 'ğŸ‡»ğŸ‡³' };
  return flags[lang] || 'ğŸŒ';
}

function formatTime(ts) {
  if (!ts) return '';
  const d = new Date(ts);
  const now = new Date();
  const diff = now - d;
  if (diff < 60000) return 'ë°©ê¸ˆ';
  if (diff < 3600000) return Math.floor(diff/60000) + 'ë¶„ ì „';
  if (diff < 86400000) return Math.floor(diff/3600000) + 'ì‹œê°„ ì „';
  return (d.getMonth()+1) + '/' + d.getDate();
}

function previewText(text) {
  if (!text) return 'ìƒˆë¡œìš´ ëŒ€í™”';
  let t = text.replace(/\[WECHAT_QR\]/g, 'ğŸ‡¨ğŸ‡³ ìœ„ì±—í˜ì´').replace(/\[DIRECTIONS_BTN\]/g, '').replace(/\n/g, ' ').trim();
  if (t.length > 40) t = t.substring(0, 40) + '...';
  return escapeHtml(t);
}

// === ë©”ë‰´ ì‚¬ì´ë“œë°” ===
const menuData = {
  makeup: `<h4>ğŸ’„ [ Lady - Make up ]</h4>
<div class="price-row"><span>A (daily)</span><span>â‚©100,000</span></div>
<div class="price-row"><span>B (idol, photo shoot)</span><span>â‚©110,000</span></div>

<h4>ğŸ¤µ [ Man - Make up ]</h4>
<div class="price-row"><span>A (daily)</span><span>â‚©60,000</span></div>
<div class="price-row"><span>B (idol, photo shoot)</span><span>â‚©90,000</span></div>

<h4>ğŸ“š [ Make up Lesson ]</h4>
<div class="price-row"><span>90 min</span><span>â‚©350,000</span></div>

<div class="divider"></div>

<h4>âœ¨ Hair Styling (Setting)</h4>
<p class="note">(+ hair wash +â‚©20,000)</p>
<div class="price-row"><span>[ Lady ] A (daily)</span><span>â‚©45,000</span></div>
<div class="price-row"><span>B (semi up style)</span><span>â‚©60,000</span></div>
<div class="price-row"><span>C (up style)</span><span>â‚©80,000</span></div>
<div class="price-row"><span>[ Man ]</span><span>â‚©40,000</span></div>

<p class="note">* Please decide the style after consulting with the designer.<br>*ãƒ‡ã‚¶ã‚¤ãƒŠãƒ¼ã¨ã”ç›¸è«‡ã®ä¸Šã€ã‚¹ã‚¿ã‚¤ãƒ«ã‚’ãŠæ±ºã‚ãã ã•ã„ã€‚</p>

<div class="divider"></div>

<h4>â° Early Charge (before 10:00 AM)</h4>
<p class="note">+æ—©æœæ–™é‡‘</p>
<div class="price-row"><span>AM 9:00 Hair</span><span>+â‚©10,000</span></div>
<div class="price-row"><span>AM 9:00 Make up</span><span>+â‚©10,000</span></div>
<div class="price-row"><span>AM 8:00 Hair</span><span>+â‚©20,000</span></div>
<div class="price-row"><span>AM 8:00 Make up</span><span>+â‚©20,000</span></div>
<div class="price-row"><span>AM 7:00 Hair</span><span>+â‚©30,000</span></div>
<div class="price-row"><span>AM 7:00 Make up</span><span>+â‚©30,000</span></div>`,

  hair: `<h4>âœ‚ï¸ Cut</h4>
<div class="price-row"><span>Lady</span><span>â‚©55,000</span></div>
<div class="price-row"><span>Man</span><span>â‚©40,000</span></div>

<h4>ğŸŒ€ Perm</h4>
<div class="price-row"><span>Lady</span><span>â‚©220,000 ~</span></div>
<div class="price-row"><span>Man</span><span>â‚©140,000 ~</span></div>

<h4>ğŸ¨ Color</h4>
<div class="price-row"><span>Lady</span><span>â‚©140,000 ~</span></div>
<div class="price-row"><span>Man</span><span>â‚©120,000 ~</span></div>

<h4>ğŸ’« Extension</h4>
<div class="price-row"><span>Normal</span><span>â‚©400,000 ~</span></div>
<div class="price-row"><span>Premium</span><span>â‚©600,000 ~</span></div>`,

  spa: `<h4>ğŸ§– Head Spa</h4>
<div class="price-row"><span>30 min</span><span>â‚©70,000</span></div>
<div class="price-row"><span>60 min</span><span>â‚©130,000</span></div>

<h4>ğŸ’† Hair Treatment</h4>
<div class="price-row"><span>60 min</span><span>â‚©140,000 ~</span></div>

<h4>ğŸ§–â€â™€ï¸ Head Spa + Treatment</h4>
<div class="price-row"><span>90 min</span><span>â‚©230,000</span></div>`,

  photo: `<h4>ğŸ“· í”„ë¦¬ë¯¸ì—„ ì¦ëª…ì‚¬ì§„</h4>
<div class="price-row"><span>30 min</span><span>â‚©60,000</span></div>
<p><a href="https://instagram.com/mallang__id" target="_blank" class="msg-link">@mallang__id</a></p>
<p>â€¢ ì‹ ë¶„ì¦, í•™ìƒì¦, ì‚¬ì›ì¦, ê¸°ë…ìš© ì‚¬ì§„</p>
<p>â€¢ ë°°ê²½ìƒ‰ ì„ íƒ ê°€ëŠ¥</p>
<p>â€¢ ì •ë©´ ë˜ëŠ” ìƒë°˜ì‹  ì¸¡ë©´ ì´¬ì˜ë§Œ ê°€ëŠ¥</p>
<p>â€¢ ì´¬ì˜ ì‚¬ì§„ ì¤‘ 1ì¥ ì„ íƒ â†’ 1:1 ë¦¬í„°ì¹­ í¬í•¨</p>
<p>â€¢ ì¶”ê°€ ë¦¬í„°ì¹­: 1ì¥ë‹¹ â‚©40,000</p>
<p><b>ì¸í™” í¬í•¨</b></p>
<p>â€¢ 5.5 Ã— 7.5 cm (1ë§¤)</p>
<p>â€¢ 5.5 Ã— 8 cm (2ë§¤)</p>
<p>â€¢ 3.5 Ã— 4.5 cm (8ë§¤)</p>

<div class="divider"></div>

<h4>ğŸ“¸ í”„ë¡œí•„ ì´¬ì˜</h4>
<div class="price-row"><span>60 min</span><span>â‚©120,000</span></div>
<p><a href="https://instagram.com/mallang__photo" target="_blank" class="msg-link">@mallang__photo</a></p>
<p>â€¢ 4ê°€ì§€ ë¬´ë“œ ì¤‘ 1ê°€ì§€ ì„ íƒ, ììœ  í¬ì¦ˆ</p>
<p>â€¢ ìƒë°˜ì‹  ë° ì „ì‹  ì´¬ì˜</p>
<p>â€¢ ì›ë³¸ ì „ì²´ ì´ë©”ì¼ ì „ë‹¬ (ë¦¬í„°ì¹­ 1ì¥ í¬í•¨)</p>
<p>â€¢ ë¦¬í„°ì¹­ ì†Œìš” ê¸°ê°„: 7~14ì¼</p>
<p>â€¢ ì»¨ì…‰ 1ê°œë‹¹ ì˜ìƒ 1ë²Œ</p>
<p>â€¢ ì¶”ê°€ ë¦¬í„°ì¹­: 1ì¥ë‹¹ â‚©40,000</p>
<p class="note">*ì˜ìƒì€ ì§ì ‘ ê°–ê³  ì˜¤ì…”ì•¼ í•©ë‹ˆë‹¤</p>

<div class="divider"></div>

<h4>ğŸ’‘ ì»¤í”Œ í”„ë¡œí•„ ì´¬ì˜</h4>
<div class="price-row"><span>60 min</span><span>â‚©220,000</span></div>
<p>â€¢ í¬í†  ì‘ê°€ì™€ ë¬´ë“œ ë° í¬ì¦ˆ ìƒë‹´</p>
<p>â€¢ ìƒë°˜ì‹  ë° ì „ì‹  ì´¬ì˜</p>
<p>â€¢ ì›ë³¸ ì „ì²´ ì´ë©”ì¼ ì „ë‹¬ (ë¦¬í„°ì¹­ 1ì¥ í¬í•¨)</p>
<p>â€¢ ë¦¬í„°ì¹­ ì†Œìš” ê¸°ê°„: 7~14ì¼</p>
<p>â€¢ ì»¨ì…‰ 1ê°œë‹¹ ì˜ìƒ 1ë²Œ</p>
<p>â€¢ ì¶”ê°€ ë¦¬í„°ì¹­: 1ì¥ë‹¹ â‚©40,000</p>
<p class="note">*ì˜ìƒì€ ì§ì ‘ ê°–ê³  ì˜¤ì…”ì•¼ í•©ë‹ˆë‹¤</p>`,

  booking: `<h4>ğŸ“… ì˜ˆì•½ ì•ˆë‚´ / Reservation</h4>
<p>â€¢ ë¨¼ì € ê³ ê°ë‹˜ì˜ ì •ë³´ê°€ í•„ìš”í•©ë‹ˆë‹¤.</p>
<p>â€¢ ì˜ˆì•½ê¸ˆ ê²°ì œ í›„ ì˜ˆì•½ì´ í™•ì •ë©ë‹ˆë‹¤.</p>
<p>â€¢ ì˜ˆì•½ì¼ ê¸°ì¤€ 2ì¼ ì „ ì˜¤í›„ 6ì‹œ(KST)ê¹Œì§€ ì·¨ì†Œ ë° í™˜ë¶ˆì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.</p>
<p>â€¢ 1ì‹œê°„ ì´ë‚´ì— ì˜ˆì•½ê¸ˆ ê²°ì œê°€ ê°€ëŠ¥í•˜ì‹œë©´ ì•„ë˜ ë‚´ìš©ì„ ì‘ì„±í•´ ì£¼ì„¸ìš”.</p>
<p>â€¢ ì´ê¸ˆì•¡ì—ì„œ ì˜ˆì•½ê¸ˆì„ ì œì™¸í•œ ë‚˜ë¨¸ì§€ ê¸ˆì•¡ì„ í˜„ì¥ì—ì„œ ê²°ì œí•©ë‹ˆë‹¤.</p>
<p>â€¢ ì˜ˆì•½ê¸ˆ ê²°ì œ í›„ ìŠ¤í¬ë¦°ìƒ·ì„ ê¼­ ì´ê³³ì— ë‚¨ê²¨ì£¼ì„¸ìš”. ê·¸ë ‡ì§€ ëª»í•  ê²½ìš° ì˜ˆì•½ì´ í™•ì •ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</p>

<div class="divider"></div>

<p><b>ë‚ ì§œ :</b> ì›” / ì¼ ( ìš”ì¼ )</p>
<p><b>ì‹œê°„ :</b></p>
<p><b>ì´ë¦„(ì˜ë¬¸) :</b></p>
<p><b>ì¸ì› :</b></p>
<p><b>ì›í•˜ì‹œëŠ” ì„œë¹„ìŠ¤ :</b></p>
<p><b>ê²°ì œ ë°©ë²• :</b></p>
<p class="note">ğŸ‡¨ğŸ‡³ ì¤‘êµ­ : ìœ„ì±—í˜ì´, ì•Œë¦¬í˜ì´<br>ğŸ‡¯ğŸ‡µ ì¼ë³¸ : ê³„ì¢Œì´ì²´ (í˜ì´í˜ì´ ì€í–‰)<br>ğŸ’³ ê³µìš© : ì¹´ë“œê²°ì œ</p>
<button onclick="copyBookingForm()" style="margin-top:1rem;width:100%;padding:0.7rem;background:#C9A063;color:white;border:none;border-radius:8px;cursor:pointer;font-size:0.9rem;">ğŸ“‹ ë³µì‚¬í•˜ê¸° (Copy)</button>`
};

function copyBookingForm() {
  const text = `ë‚ ì§œ : ì›” / ì¼ ( ìš”ì¼ )
ì‹œê°„ :
ì´ë¦„(ì˜ë¬¸) :
ì¸ì› :
ì›í•˜ì‹œëŠ” ì„œë¹„ìŠ¤ :
ê²°ì œ ë°©ë²• :`;
  navigator.clipboard.writeText(text).then(() => {
    event.target.textContent = 'âœ… ë³µì‚¬ì™„ë£Œ!';
    setTimeout(() => { event.target.textContent = 'ğŸ“‹ ë³µì‚¬í•˜ê¸° (Copy)'; }, 2000);
  }).catch(() => {
    // fallback
    const ta = document.createElement('textarea');
    ta.value = text;
    document.body.appendChild(ta);
    ta.select();
    document.execCommand('copy');
    document.body.removeChild(ta);
    event.target.textContent = 'âœ… ë³µì‚¬ì™„ë£Œ!';
    setTimeout(() => { event.target.textContent = 'ğŸ“‹ ë³µì‚¬í•˜ê¸° (Copy)'; }, 2000);
  });
}

// ì‚¬ì´ë“œë°” í™•ì¥/ì¶•ì†Œ (PC)
function expandSidebar() {
  document.querySelector('.menu-sidebar').classList.add('expanded');
}
function collapseSidebar() {
  document.querySelector('.menu-sidebar').classList.remove('expanded');
}

// ëª¨ë°”ì¼ ë©”ë‰´ í† ê¸€
function toggleMobileMenu() {
  const sidebar = document.querySelector('.menu-sidebar');
  const overlay = document.getElementById('menuOverlay');
  sidebar.classList.toggle('mobile-open');
  overlay.classList.toggle('active');
}
function closeMobileMenu() {
  document.querySelector('.menu-sidebar').classList.remove('mobile-open');
  document.getElementById('menuOverlay').classList.remove('active');
}

function showMenu(key) {
  document.querySelectorAll('.menu-tab').forEach(t => t.classList.remove('active'));
  event.target.classList.add('active');
  document.getElementById('menuContent').innerHTML = menuData[key] || '';
}

// ì´ˆê¸° ë©”ë‰´ ë¡œë“œ
document.addEventListener('DOMContentLoaded', () => {
  const mc = document.getElementById('menuContent');
  if (mc) mc.innerHTML = menuData.makeup;
});

function escapeHtml(text) {
  if (!text) return '';
  const div = document.createElement('div');
  div.textContent = text;
  return div.innerHTML;
}

function renderMessage(text) {
  if (!text) return '';
  let html = escapeHtml(text);

  // Convert URLs to clickable links FIRST (before marker replacement)
  html = html.replace(/(https?:\/\/[^\s<]+)/g, '<a href="$1" target="_blank" class="msg-link">$1</a>');

  // Replace special markers (inserted HTML won't be double-processed)
  html = html.replace('[WECHAT_QR]', '<img src="' + WECHAT_QR + '" class="msg-img" alt="WeChat Pay QR">');
  html = html.replace('[DIRECTIONS_BTN]', '<a href="https://www.instagram.com/reel/DIvxoGwy482/?igsh=MTI5cW8wM3MwNGM1OA==" target="_blank" class="msg-link-btn">ğŸ“ How to get here (Video)</a>');

  // Bold/highlight: **text** â†’ highlighted
  html = html.replace(/\*\*(.+?)\*\*/g, '<span class="msg-highlight">$1</span>');

  // Center alignment: [CENTER]text[/CENTER]
  html = html.replace(/\[CENTER\](.*?)\[\/CENTER\]\n?/g, '<div style="text-align:center;margin:-0.2em 0;padding:0;line-height:1.2;">$1</div>');

  // Newlines
  html = html.replace(/\n/g, '<br>');
  return html;
}
</script>
</body>
</html>
